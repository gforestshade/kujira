+++
date = "2018-05-05T17:56:30+09:00"
title = "移動力と地形コスト"
banner = "green"
categories = ["コラム"]
+++

# はじめに
みなさん、斥候は好きですか？
移動力2の彼らは、迅速な探索に、偵察に、となくてはならない存在ですよね。
でも、丘・森・道路・ヘリコプターなどが複雑に絡んでくると
いったいユニットってどこまで移動できるのかよくわからなくなりがちです。
今回はそんなユニットの移動についてのお話です。

<!--more-->

# 移動力
みなさんご存知移動力。足のマークで表記されているあれです。
ユニットごとに固定です。一応大将軍を合成すれば、昇進「士気」によって`+1`だけ
後天的に上昇させることができます。

# 地形コスト
あらゆる地形には「地形コスト」というものが設定されています。

基本地形コストは、基本地形によって決まります。
BtSでは、全地形で`1`です。
(MODで変更可能なので、砂漠の移動コストを増やしていたりするMODもあります。)

地形コストを指定する追加地形がある場合、基本地形コストを上書きします。
森・ジャングル・オアシス・死の灰で`2`です。

この時点で、丘陵補正がかかります。もしタイルが丘陵ならば、`+1`します。

例：草原/丘陵/森林 -> 地形コスト3

ユニットは、移動先の地形コストの分だけ移動力を消費します。
もし、まだ移動力が残っているようなら、そこからさらに移動/行動ができます。

移動力3の熟練労働者は、森林(コスト2)に入っても移動力が1残るので、伐採コマンドの実行ができますが、
森林/丘陵(コスト3)に入ると、移動力を使い切ってしまい、行動終了状態になってしまいます。

# 深みへ
この移動力と地形コスト、実は内部では1/60単位まで計算されています。
そこで、移動力に`60`を掛けたものを、**内部移動力**、
地形コストに`60`を掛けたものを**内部地形コスト**と呼ぶことにします。

移動力1 -> 内部移動力60
移動力2 -> 内部移動力120
移動力3 -> 内部移動力180
移動力4 -> 内部移動力240

平地 -> 内部地形コスト60
森林 -> 内部地形コスト120
丘陵 -> 内部地形コスト120
森林/丘陵 -> 内部地形コスト180

# 地形コストを減らす効果
道(道路・鉄道)、昇進「レンジャーⅡ」、昇進「ゲリラⅡ」、昇進「機動力」は、
地形コストの方を減らすことによってユニットがよりたくさん移動できるようにします。

## 機動力
昇進「機動力」を持っていた場合、この時点で地形コストを`1`減らします。
ただしこれによって`0`になってしまった場合は`1`に戻されます。
つまり機動力は「森や丘を1つ無視しているかのように移動できる」昇進です。

またその性質上、内部地形コストを`1`以下に下げることはできませんので、
もともと移動力1のユニットがこの昇進を持っても無意味です。

## 移動力による切り下げ
ここまでの計算で地形コストが移動力を上回ってしまった場合、
移動力と同じ値まで切り下げられます。

戦士(移動力1)が森林(コスト2)に侵入しようとしている:
地形コスト2 -> 地形コスト1

## 内部コストへ変換
これより先は割り算処理です。その前に内部コストに変換します。
地形コスト1 -> 内部地形コスト60

## レンジャー・ゲリラ
ユニットが昇進「レンジャーⅡ」を持っていて、森林に侵入しようとしている場合は、
内部地形コストを半分にします。

「レンジャーⅡ」を持つ戦士が森林に侵入しようとしている:
地形コスト`2` →(切り下げ)→ 地形コスト`1` →(変換)→
内部地形コスト`60` →(半減)→ 内部地形コスト`30`

---

「ゲリラⅡ」も同様に半減します。

「ゲリラⅡ」を持つ戦士が森林/丘陵に侵入しようとしている:
地形コスト`3` →(切り下げ)→ 地形コスト`1` →(変換)→
内部地形コスト`60` →(半減)→ 内部地形コスト`30`

---

ここまでで内部地形コストが`30`になりましたから、
戦士(内部移動力60)は森林タイルをまたいで2マス移動できることになります。

ただし、昇進と地形の組み合わせによるコスト半減処理は1度しか行われません。
「ゲリラⅡ」と「レンジャーⅡ」を両方持っていても、半減は1回です。

さらに、この処理は[移動力による切り下げ](#移動力による切り下げ)をする直前に
移動力が`1`を超えていた場合にのみ発生します。
これにより、機動力とレンジャーⅡ/ゲリラⅡを同時に持つユニットは、機動力の効果しか受けられなくなります。

## 道
移動元のタイルと移動先のタイルの両方に道(道路・鉄道)が存在する場合、
内部地形コストが上書きされます。
(非常に稀なケースかつMOD前提ですが、もし万が一ここまでの内部地形コストが
道コストより小さい場合、小さい方が優先されます)

道路:`30` 鉄道:`6`

戦車(内部移動力120)が鉄道を使用するとき、20マス移動できることになります。

ただし、建築学を持っておらず、かつ川越えの場合に限り、道は無効化され、
元の内部地形コストが適用されます。
(道が無効化されるだけで、川越えに追加の地形コストがかかることはありません)

また、戦争中の敵文明の領土の中であって、特別奇襲を持っていない場合も、道は無効化されて、
元の内部地形コストが適用されます。

それとは別に、道には工学用のコストも設定されています。

道路:`30` 鉄道:`20`

そして工学自体にも、工学用コスト`-10`という値が設定されています。
もし、持っているすべての技術によるコスト減少を考慮した工学用コストの方が小さい場合、
小さい方が適用されます。

例
工学を持っていれば、道路の道コストは`30`、工学用コストは`30-10`で`20`
したがって`20`が適用され、移動力1で3マス移動できる

&nbsp;

たくさん移動して、よき電撃戦ライフを！
